<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ED2K链接净化器</title>
    <link rel="stylesheet" href="src/style.css">
</head>
<body>
    <div class="container">
        <h1>🔗 ED2K链接净化器</h1>
        
        <div class="input-section">
            <label for="inputText">输入框（粘贴包含ed2k链接的文本）：</label>
            <textarea id="inputText" placeholder="请在此处粘贴包含ed2k链接的文本...

示例：
&lt;p&gt;ed2k://|file|example_video.mp4|1234567890|ABC123DEF456789012345678901234567890|/&lt;/p&gt;
ed2k删除://|file|sample_file.mp4|9876543210|DEF456ABC789012345678901234567890123|h=XYZABC123DEFGHI456JKLMNO789PQRSTUV|/
ed2k://%7Cfile%7C%20demo_content.mp4%7C1357924680%7CGHI789JKL012345678901234567890ABCDEF%7Ch=MNOPQR456STUVWX789ABCDEF012345GHIJK%7C/"></textarea>
            <div class="help-text">
                支持的格式：HTML标签包裹的链接、URL编码的链接、包含"删除"字样的链接等
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="purifyLinks()">🧹 净化链接</button>
            <button onclick="clearAll()" class="secondary-btn">🗑️ 清空所有</button>
            <button onclick="copyOutput()" class="secondary-btn">📋 复制结果</button>
        </div>
        
        <div class="output-section">
            <label for="outputText">输出框（净化后的ed2k链接）：</label>
            <textarea id="outputText" readonly placeholder="净化后的ed2k链接将显示在这里..."></textarea>
        </div>
        
        <div id="failedSection" class="output-section" style="display: none;">
            <label for="failedText" style="color: #c62828;">⚠️ 修复失败的链接：</label>
            <textarea id="failedText" readonly placeholder="无法识别或修复的链接..." style="background-color: #ffebee; border-color: #ef9a9a;"></textarea>
        </div>
        
        <div id="stats" class="stats" style="display: none;">
            <div class="stats-item">📊 <span id="totalCount">0</span> 个链接已扫描</div>
            <div class="stats-item">✅ <span id="validCount">0</span> 个有效链接</div>
            <div class="stats-item">🔄 <span id="duplicateCount">0</span> 个重复链接被移除</div>
            <div class="stats-item">❌ <span id="invalidCount">0</span> 个无效链接被过滤</div>
            <div class="stats-item">🔧 <span id="fixedCount">0</span> 个链接被修复</div>
        </div>
        <div id="toast" class="toast"></div>
    </div>

    <script src="src/purifier.js"></script>
</body>
</html>
